<div class="dashboard-wrapper">
  
  <aside class="sidebar">
    <div class="logo">
      <h2> CRM Panel</h2>
    </div>
    
    <nav class="menu">
      <button (click)="toggleForm(true)" class="menu-btn add-btn">
         Yeni Müşteri Ekle
      </button>
      


      </nav>
  </aside>

  <main class="main-content">
    
    <header class="top-bar">
      <div class="search-box">
        <input type="text" 
               placeholder="Müşteri ara (Ad, Soyad, Meslek)..." 
               [(ngModel)]="searchText">
      </div>
    </header>

    <div class="content-area">

      @if (showForm) {
        <div class="form-overlay">
          <div class="form-card">
            <h3>{{ editingCustomerId ? ' Müşteriyi Düzenle' : ' Yeni Müşteri' }}</h3>
            
            <div class="form-grid">
              <input type="text" placeholder="Ad" [(ngModel)]="newCustomer.ad">
              <input type="text" placeholder="Soyad" [(ngModel)]="newCustomer.soyad">
              <input type="text" placeholder="Email" [(ngModel)]="newCustomer.email">
              <input type="text" placeholder="Meslek" [(ngModel)]="newCustomer.meslek">
            </div>

            <div class="form-actions">
              <button class="save-btn" (click)="saveOrUpdate()">
                {{ editingCustomerId ? 'Güncelle' : 'Kaydet' }}
              </button>
              <button class="cancel-btn" (click)="toggleForm(false)">İptal</button>
            </div>
          </div>
        </div>
      }

      <div class="customer-grid">
        @for (customer of filteredCustomers; track customer) {
          <div class="card">
            <div class="card-header">
              <div class="avatar">{{ customer.ad.charAt(0) }}</div>
              <div>
                <h4>{{ customer.ad }} {{ customer.soyad }}</h4>
                <small>{{ customer.meslek }}</small>
              </div>
            </div>
            
            <div class="card-body">
              <p> {{ customer.email }}</p>
            </div>

            <div class="card-footer">
              <button class="action-btn edit" (click)="editMode(customer)"> Düzenle</button>
              <button class="action-btn delete" (click)="deleteCustomer(customer.id)"> Sil</button>
            </div>
          </div>
        } @empty {
          <div class="no-data">
            <p>Aradığınız kriterde müşteri bulunamadı.</p>
          </div>
        }
      </div>

    </div>
  </main>
</div>